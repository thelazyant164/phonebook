{"version":3,"sources":["components/Filter.js","components/InputForm.js","components/ContactList.js","components/Notification.js","services/phonebookService.js","App.js","index.js"],"names":["Filter","filterPass","filterEvent","value","onChange","InputForm","submit","newName","newNumber","handleChange","onSubmit","type","ContactList","shownPersons","confirmDelete","map","person","name","number","onClick","Notification","message","succeed","className","content","phonebookService","getContactList","url","axios","get","then","response","data","addContactList","newPerson","post","removeContactList","delete","updateContactList","put","App","baseURL","useState","persons","setPersons","setNewName","setNewNumber","setFilterPass","setShownPersons","setMessage","shouldRefresh","setShouldRefresh","useEffect","contactList","filter","includes","event","target","preventDefault","possibleDuplicatePerson","find","undefined","setTimeout","catch","error","window","confirm","id","alert","newValue","test","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b0b28350.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({filterPass, filterEvent}) => <> Filter shown with: <input value={filterPass} onChange={filterEvent}/> </>\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst InputForm = ({submit, newName, newNumber, handleChange}) => <>\r\n  <h3>Add a new</h3>\r\n    <form onSubmit={submit}>\r\n      <div>\r\n        Name: <input value={newName} onChange={handleChange}/>\r\n      </div>\r\n      <div>\r\n        Number: <input value={newNumber} onChange={handleChange}/>\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n</>\r\n\r\nexport default InputForm","import React from 'react'\r\n\r\nconst ContactList = ({shownPersons, confirmDelete}) => <>\r\n  <h2>Numbers</h2>\r\n  {shownPersons.map(person => <div key={person.name}>\r\n    {person.name}: {person.number} <button onClick={confirmDelete(person)}>delete</button>\r\n  </div>)}\r\n</>\r\n\r\nexport default ContactList","import React from 'react'\r\n\r\nconst Notification = ({message}) => {\r\n  if (message === null) {\r\n    return null\r\n  } else if (message.succeed) {\r\n    return <div className=\"succeed\">{message.content}</div>\r\n  }\r\n  else {\r\n    return <div className=\"error\">{message.content}</div>\r\n  }\r\n}\r\n\r\nexport default Notification","import axios from 'axios'\r\n\r\nconst getContactList = url => {\r\n  const request = axios.get(url)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst addContactList = (url, newPerson) => {\r\n  const request = axios.post(url, newPerson)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst removeContactList = url => {\r\n  const request = axios.delete(url)\r\n  return request.then(response => response)\r\n}\r\n\r\nconst updateContactList = (url, newPerson) => {\r\n  const request = axios.put(url, newPerson)\r\n  return request.then(response => response)\r\n}\r\n\r\nconst phonebookService = {\r\n  getContactList,\r\n  addContactList,\r\n  removeContactList,\r\n  updateContactList\r\n}\r\n\r\nexport default phonebookService","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport InputForm from './components/InputForm'\r\nimport ContactList from './components/ContactList'\r\nimport Notification from './components/Notification'\r\nimport phonebookService from './services/phonebookService'\r\nimport './index.css'\r\n\r\nconst App = () => {\r\n  \r\n  const baseURL = process.env.NODE_ENV === \"development\" ? \"http://localhost:3001/persons\" : \"/api/persons\"\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filterPass, setFilterPass ] = useState('')\r\n  const [ shownPersons, setShownPersons ] = useState(persons)\r\n  const [ message, setMessage ] = useState(null)\r\n  const [ shouldRefresh, setShouldRefresh ] = useState(true)\r\n\r\n  useEffect(() => {\r\n    phonebookService\r\n      .getContactList(baseURL)\r\n      .then(contactList => {\r\n        setPersons(contactList)\r\n      })\r\n  }, [ shouldRefresh ])\r\n\r\n  useEffect(\r\n    () => {\r\n      if (filterPass !== '') {\r\n        setShownPersons(persons.filter(person => person.name.includes(filterPass)))\r\n      } else {\r\n        setShownPersons(persons)\r\n      }\r\n    }, [ filterPass, persons ]\r\n  )\r\n\r\n  const filterEvent = event => {\r\n    setFilterPass(event.target.value)\r\n  }\r\n\r\n  const handleChange = event => {\r\n    const newValue = event.target.value\r\n    if ((/[a-zA-Z]/).test(newValue)) {\r\n      setNewName(newValue)\r\n    } else {\r\n      setNewNumber(newValue)\r\n    }\r\n  }\r\n\r\n  const submit = event => {\r\n    event.preventDefault()\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber,\r\n    }\r\n    const possibleDuplicatePerson = persons.find(person => person.name === newPerson.name)\r\n    if (possibleDuplicatePerson === undefined) {\r\n      phonebookService\r\n        .addContactList(baseURL, newPerson)\r\n        .then(() => {\r\n          setShouldRefresh(!shouldRefresh)\r\n          setNewName('')\r\n          setNewNumber('')\r\n        })\r\n        .then(() => {\r\n          setMessage({\r\n            content: `${newName} is added in phonebook.`,\r\n            succeed: true\r\n          })\r\n          setTimeout(() => {setMessage(null)}, 5000)\r\n        })\r\n        .catch(error => {\r\n          setMessage({\r\n            content: `${error}`,\r\n            succeed: false\r\n          })\r\n          setTimeout(() => {setMessage(null)}, 5000)\r\n        })\r\n    } else if (possibleDuplicatePerson.number !== newNumber) {\r\n      const ok = window.confirm(`${newName} is already added to phonebook. Update phone number?`)\r\n      if (ok) {\r\n        const id = possibleDuplicatePerson.id\r\n        phonebookService.updateContactList(`${baseURL}/${id}`, {...possibleDuplicatePerson, number: newNumber})\r\n        .then(() => {\r\n          setShouldRefresh(!shouldRefresh)\r\n        })\r\n        .then(() => {\r\n          setMessage({\r\n            content: `${newName}'s new number is updated in phonebook.`,\r\n            succeed: true\r\n          })\r\n          setTimeout(() => {setMessage(null)}, 5000)\r\n        })\r\n        .catch(error => {\r\n          setMessage({\r\n            content: `${error}`,\r\n            succeed: false\r\n          })\r\n          setTimeout(() => {setMessage(null)}, 5000)\r\n        })\r\n      }\r\n    } else {\r\n      alert(`${newName} is already added to phonebook`)\r\n    }\r\n  }\r\n\r\n  const confirmDelete = person => () => {\r\n    const ok = window.confirm(`Delete \"${person.name}\"?`)\r\n    if (ok) {\r\n      phonebookService.removeContactList(`${baseURL}/${person.id}`)\r\n      .then(() => {\r\n        setShouldRefresh(!shouldRefresh)\r\n      })\r\n      .then(() => {\r\n        setMessage({\r\n          content: `${person.name} is removed from phonebook.`,\r\n          succeed: true\r\n        })\r\n        setTimeout(() => {setMessage(null)}, 5000)\r\n      })\r\n      .catch(error => {\r\n        setMessage({\r\n          content: `${error}`,\r\n          succeed: false\r\n        })\r\n        setTimeout(() => {setMessage(null)}, 5000)\r\n      })\r\n    }\r\n  }\r\n\r\n  return <>\r\n    <Notification message={message}/>\r\n    <h2>Phonebook</h2>\r\n    <Filter filterPass={filterPass} filterEvent={filterEvent}/>\r\n    <InputForm submit={submit} newName={newName} newNumber={newNumber} handleChange={handleChange}/>\r\n    <ContactList shownPersons={shownPersons} confirmDelete={confirmDelete}/>\r\n  </>\r\n}\r\n\r\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}