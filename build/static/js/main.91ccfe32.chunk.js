(this["webpackJsonp1.1"]=this["webpackJsonp1.1"]||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(17),o=n.n(c),u=n(8),a=n(3),i=n(1),s=n(0),r=function(e){var t=e.filterPass,n=e.filterEvent;return Object(s.jsxs)(s.Fragment,{children:[" Filter shown with: ",Object(s.jsx)("input",{value:t,onChange:n})," "]})},d=function(e){var t=e.submit,n=e.newName,c=e.newNumber,o=e.handleChange;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h3",{children:"Add a new"}),Object(s.jsxs)("form",{onSubmit:t,children:[Object(s.jsxs)("div",{children:["Name: ",Object(s.jsx)("input",{value:n,onChange:o})]}),Object(s.jsxs)("div",{children:["Number: ",Object(s.jsx)("input",{value:c,onChange:o})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})]})},b=function(e){var t=e.shownPersons,n=e.confirmDelete;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Numbers"}),t.map((function(e){return Object(s.jsxs)("div",{children:[e.name,": ",e.number," ",Object(s.jsx)("button",{onClick:n(e),children:"delete"})]},e.name)}))]})},j=function(e){var t=e.message;return null===t?null:t.succeed?Object(s.jsx)("div",{className:"succeed",children:t.content}):Object(s.jsx)("div",{className:"error",children:t.content})},l=n(4),f=n.n(l),h={getContactList:function(e){return f.a.get(e).then((function(e){return e.data}))},addContactList:function(e,t){return f.a.post(e,t).then((function(e){return e.data}))},removeContactList:function(e){return f.a.delete(e).then((function(e){return e}))},updateContactList:function(e,t){return f.a.put(e,t).then((function(e){return e}))}},m=(n(41),function(){var e="/api/persons",t=Object(i.useState)([]),n=Object(a.a)(t,2),c=n[0],o=n[1],l=Object(i.useState)(""),f=Object(a.a)(l,2),m=f[0],O=f[1],v=Object(i.useState)(""),p=Object(a.a)(v,2),x=p[0],g=p[1],w=Object(i.useState)(""),C=Object(a.a)(w,2),k=C[0],N=C[1],L=Object(i.useState)(c),S=Object(a.a)(L,2),T=S[0],E=S[1],F=Object(i.useState)(null),P=Object(a.a)(F,2),y=P[0],D=P[1],A=Object(i.useState)(!0),J=Object(a.a)(A,2),z=J[0],B=J[1];Object(i.useEffect)((function(){h.getContactList(e).then((function(e){o(e)}))}),[z]),Object(i.useEffect)((function(){E(""!==k?c.filter((function(e){return e.name.includes(k)})):c)}),[k,c]);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(j,{message:y}),Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(r,{filterPass:k,filterEvent:function(e){N(e.target.value)}}),Object(s.jsx)(d,{submit:function(t){t.preventDefault();var n={name:m,number:x},o=c.find((function(e){return e.name===n.name}));if(void 0===o)h.addContactList(e,n).then((function(){B(!z),O(""),g("")})).then((function(){D({content:"".concat(m," is added in phonebook."),succeed:!0}),setTimeout((function(){D(null)}),5e3)})).catch((function(e){D({content:"".concat(e.message),succeed:!1}),setTimeout((function(){D(null)}),5e3)}));else if(o.number!==x){if(window.confirm("".concat(m," is already added to phonebook. Update phone number?"))){var a=o.id;h.updateContactList("".concat(e,"/").concat(a),Object(u.a)(Object(u.a)({},o),{},{number:x})).then((function(){B(!z)})).then((function(){D({content:"".concat(m,"'s new number is updated in phonebook."),succeed:!0}),setTimeout((function(){D(null)}),5e3)})).catch((function(e){D({content:"".concat(e.message),succeed:!1}),setTimeout((function(){D(null)}),5e3)}))}}else alert("".concat(m," is already added to phonebook"))},newName:m,newNumber:x,handleChange:function(e){var t=e.target.value;/[a-zA-Z]/.test(t)?O(t):g(t)}}),Object(s.jsx)(b,{shownPersons:T,confirmDelete:function(t){return function(){window.confirm('Delete "'.concat(t.name,'"?'))&&h.removeContactList("".concat(e,"/").concat(t.id)).then((function(){B(!z)})).then((function(){D({content:"".concat(t.name," is removed from phonebook."),succeed:!0}),setTimeout((function(){D(null)}),5e3)})).catch((function(e){D({content:"".concat(e.message),succeed:!1}),setTimeout((function(){D(null)}),5e3)}))}}})]})});o.a.render(Object(s.jsx)(m,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.91ccfe32.chunk.js.map