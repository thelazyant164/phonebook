(this["webpackJsonp1.1"]=this["webpackJsonp1.1"]||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(17),o=n.n(c),i=n(8),a=n(3),u=n(1),r=n(0),s=function(e){var t=e.filterPass,n=e.filterEvent;return Object(r.jsxs)(r.Fragment,{children:[" Filter shown with: ",Object(r.jsx)("input",{value:t,onChange:n})," "]})},d=function(e){var t=e.submit,n=e.newName,c=e.newNumber,o=e.handleChange;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{children:"Add a new"}),Object(r.jsxs)("form",{onSubmit:t,children:[Object(r.jsxs)("div",{children:["Name: ",Object(r.jsx)("input",{value:n,onChange:o})]}),Object(r.jsxs)("div",{children:["Number: ",Object(r.jsx)("input",{value:c,onChange:o})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})]})},b=function(e){var t=e.shownPersons,n=e.confirmDelete;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Numbers"}),t.map((function(e){return Object(r.jsxs)("div",{children:[e.name,": ",e.number," ",Object(r.jsx)("button",{onClick:n(e),children:"delete"})]},e.name)}))]})},j=function(e){var t=e.message;return null===t?null:t.succeed?Object(r.jsx)("div",{className:"succeed",children:t.content}):Object(r.jsx)("div",{className:"error",children:t.content})},l=n(4),f=n.n(l),h={getContactList:function(e){return f.a.get(e).then((function(e){return e.data}))},addContactList:function(e,t){return f.a.post(e,t).then((function(e){return e.data}))},removeContactList:function(e){return f.a.delete(e).then((function(e){return e}))},updateContactList:function(e,t){return f.a.put(e,t).then((function(e){return e}))}},m=(n(41),function(){console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}));var e="/api/persons",t=Object(u.useState)([]),n=Object(a.a)(t,2),c=n[0],o=n[1],l=Object(u.useState)(""),f=Object(a.a)(l,2),m=f[0],O=f[1],v=Object(u.useState)(""),p=Object(a.a)(v,2),x=p[0],g=p[1],C=Object(u.useState)(""),S=Object(a.a)(C,2),w=S[0],E=S[1],N=Object(u.useState)(c),T=Object(a.a)(N,2),k=T[0],L=T[1],_=Object(u.useState)(null),D=Object(a.a)(_,2),P=D[0],F=D[1],y=Object(u.useState)(!0),A=Object(a.a)(y,2),R=A[0],H=A[1];Object(u.useEffect)((function(){h.getContactList(e).then((function(e){o(e)}))}),[R]),Object(u.useEffect)((function(){L(""!==w?c.filter((function(e){return e.name.includes(w)})):c)}),[w,c]);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j,{message:P}),Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(s,{filterPass:w,filterEvent:function(e){E(e.target.value)}}),Object(r.jsx)(d,{submit:function(t){t.preventDefault();var n={name:m,number:x},o=c.find((function(e){return e.name===n.name}));if(void 0===o)h.addContactList(e,n).then((function(){H(!R),O(""),g("")})).then((function(){F({content:"".concat(m," is added in phonebook."),succeed:!0}),setTimeout((function(){F(null)}),5e3)}));else if(o.number!==x){if(window.confirm("".concat(m," is already added to phonebook. Update phone number?"))){var a=o.id;h.updateContactList("".concat(e,"/").concat(a),Object(i.a)(Object(i.a)({},o),{},{number:x})).then((function(){H(!R)})).then((function(){F({content:"".concat(m,"'s new number is updated in phonebook."),succeed:!0}),setTimeout((function(){F(null)}),5e3)})).catch((function(){F({content:"".concat(m," is already removed from phonebook."),succeed:!1}),setTimeout((function(){F(null)}),5e3)}))}}else alert("".concat(m," is already added to phonebook"))},newName:m,newNumber:x,handleChange:function(e){var t=e.target.value;/[a-zA-Z]/.test(t)?O(t):g(t)}}),Object(r.jsx)(b,{shownPersons:k,confirmDelete:function(t){return function(){window.confirm('Delete "'.concat(t.name,'"?'))&&h.removeContactList("".concat(e,"/").concat(t.id)).then((function(){H(!R)})).then((function(){F({content:"".concat(t.name," is removed from phonebook."),succeed:!0}),setTimeout((function(){F(null)}),5e3)}))}}})]})});o.a.render(Object(r.jsx)(m,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.fbaa6770.chunk.js.map